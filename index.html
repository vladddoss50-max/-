<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–°–Å –î–õ–Ø –§–ò–ü–°–ò | –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #4a6491 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            opacity: 0.1;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }

        .header h1 span {
            color: #4ecdc4;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
        }

        .content {
            padding: 40px;
        }

        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .criterion-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
        }

        .criterion-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
            border-color: #3498db;
        }

        .criterion-card.active {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            border-color: #2980b9;
        }

        .criterion-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .criterion-card h3 {
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .criterion-card p {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .input-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
        }

        .input-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
        }

        .input-group {
            margin-bottom: 25px;
            display: none;
        }

        .input-group.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .input-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-field {
            flex: 1;
            min-width: 200px;
        }

        .input-field label {
            display: block;
            margin-bottom: 8px;
            color: #495057;
            font-weight: 500;
            font-size: 0.95em;
        }

        .input-field input, .input-field textarea, .input-field select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 15px;
            transition: all 0.3s;
            background: white;
        }

        .input-field textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }

        .input-field input:focus, .input-field textarea:focus, .input-field select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .controls button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1c5986 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(41, 128, 185, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #219653 0%, #1e8449 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .btn-solve {
            display: block;
            margin: 30px auto;
            padding: 18px 50px;
            font-size: 18px;
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
        }

        .btn-solve:hover {
            background: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 25px rgba(155, 89, 182, 0.4);
        }

        .result {
            margin-top: 40px;
            padding: 30px;
            background: white;
            border-radius: 10px;
            border-left: 5px solid #3498db;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
        }

        .result.active {
            display: block;
            animation: slideIn 0.5s;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f1f1;
        }

        .result-header h2 {
            color: #2c3e50;
            font-size: 1.5em;
        }

        .result-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 150px;
            border: 1px solid #e9ecef;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .hypothesis {
            background: #e8f4fc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }

        .hypothesis.reject {
            background: #fdeaea;
            border-left-color: #e74c3c;
        }

        .hypothesis.accept {
            background: #eafaf1;
            border-left-color: #27ae60;
        }

        .hypothesis h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .result-details {
            margin-top: 25px;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }

        .detail-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 3px solid #95a5a6;
        }

        .detail-item h4 {
            color: #495057;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .detail-item p {
            color: #2c3e50;
            font-weight: 500;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        .error {
            margin-top: 20px;
            padding: 20px;
            background: #fdeaea;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            color: #721c24;
            display: none;
        }

        .error.active {
            display: block;
            animation: shake 0.5s;
        }

        .success {
            margin-top: 20px;
            padding: 15px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            color: #155724;
            display: none;
        }

        .success.active {
            display: block;
        }

        .info-box {
            background: #e8f4fc;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 0.9em;
            color: #2c3e50;
            border-left: 3px solid #3498db;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .content {
                padding: 20px;
            }

            .criteria-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .input-row {
                flex-direction: column;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .controls button {
                width: 100%;
            }

            .result-stats {
                flex-direction: column;
            }

            .stat-card {
                width: 100%;
            }

            .details-grid {
                grid-template-columns: 1fr;
            }
        }

        .formula-box {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Cambria Math', serif;
            font-size: 1.1em;
            text-align: center;
            border: 1px dashed #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span>–í–°–Å –î–õ–Ø –§–ò–ü–°–ò</span></h1>
            <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö</p>
        </div>

        <div class="content">
            <div class="criteria-grid" id="criteriaGrid">
                <!-- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>

            <div class="input-section">
                <h2 id="currentCriterionTitle">–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–π</h2>

                <div class="input-group active" id="smirnov-inputs">
                    <div class="input-field">
                        <label for="data">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—ã–±–æ—Ä–∫–∏:</label>
                        <textarea id="data" placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –ø—Ä–æ–±–µ–ª –∏–ª–∏ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏&#10;–ü—Ä–∏–º–µ—Ä: 1.2, 2.5, 3.1, 4.8, 5.2"></textarea>
                    </div>
                    <div class="controls">
                        <button class="btn-primary" onclick="generateData()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                        <button class="btn-secondary" onclick="loadExample()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–º–µ—Ä</button>
                    </div>
                </div>

                <div class="input-group" id="two-sample-inputs">
                    <div class="input-row">
                        <div class="input-field">
                            <label for="data1">–í—ã–±–æ—Ä–∫–∞ 1:</label>
                            <textarea id="data1" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–≤–æ–π –≤—ã–±–æ—Ä–∫–∏"></textarea>
                        </div>
                        <div class="input-field">
                            <label for="data2">–í—ã–±–æ—Ä–∫–∞ 2:</label>
                            <textarea id="data2" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—Ç–æ—Ä–æ–π –≤—ã–±–æ—Ä–∫–∏"></textarea>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn-primary" onclick="generateData()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                        <button class="btn-secondary" onclick="loadExample()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–º–µ—Ä</button>
                    </div>
                </div>

                <div class="input-group" id="correlation-inputs">
                    <div class="input-row">
                        <div class="input-field">
                            <label for="x_data">–†—è–¥ X:</label>
                            <textarea id="x_data" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π X"></textarea>
                        </div>
                        <div class="input-field">
                            <label for="y_data">–†—è–¥ Y:</label>
                            <textarea id="y_data" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π Y"></textarea>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn-primary" onclick="generateData()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                        <button class="btn-secondary" onclick="loadExample()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–º–µ—Ä</button>
                    </div>
                </div>

                <div class="input-group" id="multi-group-inputs">
                    <div id="groupsContainer">
                        <div class="input-row">
                            <div class="input-field">
                                <label for="group1">–ì—Ä—É–ø–ø–∞ 1:</label>
                                <textarea id="group1" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä—É–ø–ø—ã 1"></textarea>
                            </div>
                            <div class="input-field">
                                <label for="group2">–ì—Ä—É–ø–ø–∞ 2:</label>
                                <textarea id="group2" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä—É–ø–ø—ã 2"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn-success" onclick="addGroup()">+ –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
                        <button class="btn-secondary" onclick="removeGroup()">- –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
                        <button class="btn-primary" onclick="generateData()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                    </div>
                    <div class="info-box">
                        –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã. –ú–∏–Ω–∏–º—É–º 2 –≥—Ä—É–ø–ø—ã, –º–∞–∫—Å–∏–º—É–º 10 –≥—Ä—É–ø–ø.
                    </div>
                </div>

                <div class="input-group" id="student-options">
                    <div class="input-field">
                        <label for="test_type">–¢–∏–ø t-—Ç–µ—Å—Ç–∞:</label>
                        <select id="test_type">
                            <option value="independent">–î–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –≤—ã–±–æ—Ä–æ–∫</option>
                            <option value="paired">–î–ª—è –ø–∞—Ä–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–∫</option>
                        </select>
                    </div>
                </div>

                <div class="input-group" id="cochran-options">
                    <div class="input-row">
                        <div class="input-field">
                            <label for="k">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–ø–ø (k):</label>
                            <input type="number" id="k" min="2" max="10" value="3">
                        </div>
                        <div class="input-field">
                            <label for="n">–û–±—ä—ë–º –≤—ã–±–æ—Ä–æ–∫ (n):</label>
                            <input type="number" id="n" min="2" max="100" value="10">
                        </div>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>–í—ã–ø–æ–ª–Ω—è–µ–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è...</p>
                </div>

                <div class="error" id="error"></div>

                <button class="btn-solve" onclick="solveProblem()">
                    <span style="font-size: 1.2em;">üìä</span> –í–´–ü–û–õ–ù–ò–¢–¨ –†–ê–°–ß–Å–¢
                </button>
            </div>

            <div class="result" id="result">
                <div class="result-header">
                    <h2 id="resultTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
                    <div class="result-stats" id="resultStats">
                        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>

                <div id="hypothesisBox" class="hypothesis">
                    <!-- –ì–∏–ø–æ—Ç–µ–∑–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </div>

                <div class="result-details">
                    <h3>–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á—ë—Ç–∞:</h3>
                    <div class="details-grid" id="resultDetails">
                        <!-- –î–µ—Ç–∞–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
        const criteria = [
            {
                id: 'smirnov',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –°–º–∏—Ä–Ω–æ–≤–∞',
                description: '–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—ã–±—Ä–æ—Å–æ–≤ –≤ –¥–∞–Ω–Ω—ã—Ö',
                icon: 'üîç',
                inputType: 'single',
                formula: 'u = |x_max - xÃÑ| / œÉ'
            },
            {
                id: 'fisher',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –§–∏—à–µ—Ä–∞',
                description: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∏—Å–ø–µ—Ä—Å–∏–π –¥–≤—É—Ö –≤—ã–±–æ—Ä–æ–∫',
                icon: '‚öñÔ∏è',
                inputType: 'two-sample',
                formula: 'F = s‚ÇÅ¬≤ / s‚ÇÇ¬≤'
            },
            {
                id: 'student',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –°—Ç—å—é–¥–µ–Ω—Ç–∞',
                description: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π',
                icon: 'üìê',
                inputType: 'two-sample',
                formula: 't = (xÃÑ‚ÇÅ - xÃÑ‚ÇÇ) / ‚àö(s_p¬≤(1/n‚ÇÅ + 1/n‚ÇÇ))'
            },
            {
                id: 'siegel_tukey',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –°–∏–¥–∂–µ–ª–∞-–¢—å—é–∫–∏',
                description: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∏—Å–ø–µ—Ä—Å–∏–π –¥–≤—É—Ö –≤—ã–±–æ—Ä–æ–∫',
                icon: 'üìä',
                inputType: 'two-sample',
                formula: '–†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–µ—Ç–æ–¥—É –°–∏–¥–∂–µ–ª–∞-–¢—å—é–∫–∏'
            },
            {
                id: 'mann_whitney',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –ú–∞–Ω–Ω–∞-–£–∏—Ç–Ω–∏',
                description: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –≤—ã–±–æ—Ä–æ–∫',
                icon: 'üìà',
                inputType: 'two-sample',
                formula: 'U-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞'
            },
            {
                id: 'spearman',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –°–ø–∏—Ä–º–µ–Ω–∞',
                description: '–†–∞–Ω–≥–æ–≤–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è',
                icon: 'üìâ',
                inputType: 'correlation',
                formula: 'œÅ = 1 - 6Œ£d¬≤/(n(n¬≤-1))'
            },
            {
                id: 'hortley',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –•–æ—Ä—Ç–ª–∏',
                description: '–í—ã—è–≤–ª–µ–Ω–∏–µ –≤—ã–±—Ä–æ—Å–æ–≤ (IQR –º–µ—Ç–æ–¥)',
                icon: 'üö®',
                inputType: 'single',
                formula: 'Q‚ÇÅ - 1.5√óIQR, Q‚ÇÉ + 1.5√óIQR'
            },
            {
                id: 'cochran',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –ö–æ—á—Ä–µ–Ω–∞',
                description: '–û–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—å –¥–∏—Å–ø–µ—Ä—Å–∏–π',
                icon: 'üéØ',
                inputType: 'multi-group',
                formula: 'G = s_max¬≤ / Œ£s_i¬≤'
            },
            {
                id: 'bartlett',
                name: '–ö—Ä–∏—Ç–µ—Ä–∏–π –ë–∞—Ä—Ç–ª–µ—Ç–∞',
                description: '–û–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—å –¥–∏—Å–ø–µ—Ä—Å–∏–π',
                icon: 'üî¨',
                inputType: 'multi-group',
                formula: 'œá¬≤ = (N-k)ln(s_p¬≤) - Œ£(n_i-1)ln(s_i¬≤)'
            },
            {
                id: 'anova',
                name: '–î–∏—Å–ø–µ—Ä—Å–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑',
                description: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø',
                icon: 'üìã',
                inputType: 'multi-group',
                formula: 'F = MS_between / MS_within'
            },
            {
                id: 'pearson',
                name: '–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ü–∏—Ä—Å–æ–Ω–∞',
                description: '–õ–∏–Ω–µ–π–Ω–∞—è —Å–≤—è–∑—å –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏',
                icon: 'üìà',
                inputType: 'correlation',
                formula: 'r = Œ£((x_i-xÃÑ)(y_i-»≥)) / ‚àö(Œ£(x_i-xÃÑ)¬≤Œ£(y_i-»≥)¬≤)'
            }
        ];

        // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π
        let currentCriterion = criteria[0];
        let groupCount = 2;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function initInterface() {
            const grid = document.getElementById('criteriaGrid');
            criteria.forEach(criterion => {
                const card = document.createElement('div');
                card.className = 'criterion-card';
                card.dataset.id = criterion.id;
                card.innerHTML = `
                    <div class="criterion-icon">${criterion.icon}</div>
                    <h3>${criterion.name}</h3>
                    <p>${criterion.description}</p>
                    <div class="formula-box">${criterion.formula}</div>
                `;
                card.onclick = () => selectCriterion(criterion);
                grid.appendChild(card);
            });

            // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            selectCriterion(currentCriterion);
        }

        // –í—ã–±–æ—Ä –∫—Ä–∏—Ç–µ—Ä–∏—è
        function selectCriterion(criterion) {
            currentCriterion = criterion;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            document.getElementById('currentCriterionTitle').textContent = criterion.name;

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
            document.querySelectorAll('.criterion-card').forEach(card => {
                card.classList.remove('active');
            });

            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
            document.querySelector(`[data-id="${criterion.id}"]`).classList.add('active');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –±–ª–æ–∫ –≤–≤–æ–¥–∞
            document.querySelectorAll('.input-group').forEach(group => {
                group.classList.remove('active');
            });

            // –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ –≤–≤–æ–¥–∞
            document.getElementById(`${criterion.inputType}-inputs`).classList.add('active');

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
            if (criterion.id === 'student') {
                document.getElementById('student-options').classList.add('active');
            }
            if (criterion.id === 'cochran') {
                document.getElementById('cochran-options').classList.add('active');
            }

            // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            document.getElementById('result').classList.remove('active');
            document.getElementById('error').classList.remove('active');

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
            setTimeout(loadExample, 100);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã
        function addGroup() {
            if (groupCount >= 10) return;
            groupCount++;

            const container = document.getElementById('groupsContainer');
            const row = document.createElement('div');
            row.className = 'input-row';
            row.innerHTML = `
                <div class="input-field">
                    <label for="group${groupCount}">–ì—Ä—É–ø–ø–∞ ${groupCount}:</label>
                    <textarea id="group${groupCount}" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä—É–ø–ø—ã ${groupCount}"></textarea>
                </div>
            `;
            container.appendChild(row);
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã
        function removeGroup() {
            if (groupCount <= 2) return;

            const container = document.getElementById('groupsContainer');
            container.removeChild(container.lastElementChild);
            groupCount--;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
        async function generateData() {
            const n = document.getElementById('dataSize') ? parseInt(document.getElementById('dataSize').value) : 10;

            const requestData = {
                criterion: currentCriterion.id,
                n: n
            };

            if (currentCriterion.inputType === 'two-sample') {
                requestData.n1 = n;
                requestData.n2 = n;
            }

            if (currentCriterion.id === 'cochran') {
                requestData.k = parseInt(document.getElementById('k').value);
                requestData.n = parseInt(document.getElementById('n').value);
            }

            if (currentCriterion.inputType === 'multi-group') {
                requestData.k = groupCount;
            }

            try {
                const response = await fetch('/generate_data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                const result = await response.json();

                if (result.error) {
                    showError(result.error);
                } else {
                    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
                    if (currentCriterion.inputType === 'single') {
                        document.getElementById('data').value = result.data.join(', ');
                    } else if (currentCriterion.inputType === 'two-sample') {
                        document.getElementById('data1').value = result.data.data1.join(', ');
                        document.getElementById('data2').value = result.data.data2.join(', ');
                    } else if (currentCriterion.inputType === 'correlation') {
                        document.getElementById('x_data').value = result.data.x_data.join(', ');
                        document.getElementById('y_data').value = result.data.y_data.join(', ');
                    } else if (currentCriterion.inputType === 'multi-group') {
                        for (let i = 1; i <= groupCount; i++) {
                            const textarea = document.getElementById(`group${i}`);
                            if (textarea && result.data[`data${i}`]) {
                                textarea.value = result.data[`data${i}`].join(', ');
                            }
                        }
                    }

                    showSuccess(result.message);
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö');
                console.error('Error:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–º–µ—Ä–∞
        function loadExample() {
            const examples = {
                'smirnov': "1.2, 2.5, 3.1, 4.8, 5.2, 6.7, 7.3, 8.9, 9.5, 10.1",
                'fisher': {
                    data1: "10.2, 11.5, 12.3, 13.1, 14.0, 14.8, 15.2, 16.1",
                    data2: "9.8, 10.5, 11.2, 12.8, 13.5, 14.2, 15.0, 15.8"
                },
                'student': {
                    data1: "75, 80, 85, 90, 95, 100, 105, 110",
                    data2: "70, 75, 80, 85, 90, 95, 100, 105"
                },
                'spearman': {
                    x_data: "1, 2, 3, 4, 5, 6, 7, 8, 9, 10",
                    y_data: "2, 4, 5, 4, 5, 7, 8, 9, 10, 12"
                },
                'pearson': {
                    x_data: "1, 2, 3, 4, 5, 6, 7, 8, 9, 10",
                    y_data: "2, 4, 5, 4, 5, 7, 8, 9, 10, 12"
                },
                'hortley': "12, 15, 17, 18, 20, 22, 24, 25, 28, 30, 100"
            };

            if (currentCriterion.inputType === 'single' && examples[currentCriterion.id]) {
                document.getElementById('data').value = examples[currentCriterion.id];
            } else if (currentCriterion.inputType === 'two-sample' && examples[currentCriterion.id]) {
                document.getElementById('data1').value = examples[currentCriterion.id].data1;
                document.getElementById('data2').value = examples[currentCriterion.id].data2;
            } else if (currentCriterion.inputType === 'correlation' && examples[currentCriterion.id]) {
                document.getElementById('x_data').value = examples[currentCriterion.id].x_data;
                document.getElementById('y_data').value = examples[currentCriterion.id].y_data;
            } else if (currentCriterion.inputType === 'multi-group') {
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø
                for (let i = 1; i <= groupCount; i++) {
                    const textarea = document.getElementById(`group${i}`);
                    if (textarea) {
                        const data = Array.from({length: 10}, (_, j) => (i * 10 + Math.random() * 5).toFixed(1));
                        textarea.value = data.join(', ');
                    }
                }
            }

            showSuccess('–ó–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö');
        }

        // –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
        async function solveProblem() {
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            const requestData = {
                problem_type: currentCriterion.id
            };

            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≤–≤–æ–¥–∞
            if (currentCriterion.inputType === 'single') {
                requestData.data = document.getElementById('data').value;
            } else if (currentCriterion.inputType === 'two-sample') {
                requestData.data1 = document.getElementById('data1').value;
                requestData.data2 = document.getElementById('data2').value;
            } else if (currentCriterion.inputType === 'correlation') {
                requestData.x_data = document.getElementById('x_data').value;
                requestData.y_data = document.getElementById('y_data').value;
            } else if (currentCriterion.inputType === 'multi-group') {
                for (let i = 1; i <= groupCount; i++) {
                    const textarea = document.getElementById(`group${i}`);
                    if (textarea && textarea.value.trim()) {
                        requestData[`data${i}`] = textarea.value;
                    }
                }
                requestData.k = groupCount;
            }

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            if (currentCriterion.id === 'student') {
                requestData.test_type = document.getElementById('test_type').value;
            }
            if (currentCriterion.id === 'cochran') {
                requestData.k = parseInt(document.getElementById('k').value);
                requestData.n = parseInt(document.getElementById('n').value);
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            showLoading();

            try {
                const response = await fetch('/solve', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                const result = await response.json();

                hideLoading();

                if (result.error) {
                    showError(result.error);
                } else {
                    displayResults(result);
                }
            } catch (error) {
                hideLoading();
                showError('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
                console.error('Error:', error);
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResults(result) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            document.getElementById('resultTitle').textContent = result.problem;

            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            document.getElementById('resultStats').innerHTML = '';
            document.getElementById('resultDetails').innerHTML = '';

            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            const statsDiv = document.getElementById('resultStats');
            if (result.calculated_value !== null && result.calculated_value !== undefined) {
                const statCard = document.createElement('div');
                statCard.className = 'stat-card';
                statCard.innerHTML = `
                    <div class="stat-value">${result.calculated_value.toFixed(4)}</div>
                    <div class="stat-label">–†–∞—Å—á—ë—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</div>
                `;
                statsDiv.appendChild(statCard);
            }

            if (result.critical_value !== null && result.critical_value !== undefined) {
                const statCard = document.createElement('div');
                statCard.className = 'stat-card';
                statCard.innerHTML = `
                    <div class="stat-value">${result.critical_value.toFixed(4)}</div>
                    <div class="stat-label">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</div>
                `;
                statsDiv.appendChild(statCard);
            }

            // –ì–∏–ø–æ—Ç–µ–∑–∞
            const hypothesisBox = document.getElementById('hypothesisBox');
            hypothesisBox.innerHTML = '';

            const hypothesis = document.createElement('div');
            hypothesis.className = 'hypothesis';

            if (result.hypothesis) {
                const h3 = document.createElement('h3');
                h3.textContent = '–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥:';
                hypothesis.appendChild(h3);

                const p = document.createElement('p');
                p.textContent = result.hypothesis;
                hypothesis.appendChild(p);

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                if (result.hypothesis.includes('–û–¢–í–ï–†–ì–ê–ï–¢–°–Ø') || result.hypothesis.includes('–ó–ù–ê–ß–ò–ú–ê')) {
                    hypothesis.classList.add('reject');
                } else {
                    hypothesis.classList.add('accept');
                }
            }

            hypothesisBox.appendChild(hypothesis);

            // –î–µ—Ç–∞–ª–∏
            if (result.details && result.details.length > 0) {
                result.details.forEach(detail => {
                    if (detail.trim()) {
                        const detailItem = document.createElement('div');
                        detailItem.className = 'detail-item';

                        // –†–∞–∑–¥–µ–ª—è–µ–º –º–µ—Ç–∫—É –∏ –∑–Ω–∞—á–µ–Ω–∏–µ
                        const parts = detail.split(':');
                        if (parts.length > 1) {
                            const h4 = document.createElement('h4');
                            h4.textContent = parts[0] + ':';
                            detailItem.appendChild(h4);

                            const p = document.createElement('p');
                            p.textContent = parts.slice(1).join(':').trim();
                            detailItem.appendChild(p);
                        } else {
                            const p = document.createElement('p');
                            p.textContent = detail;
                            detailItem.appendChild(p);
                        }

                        document.getElementById('resultDetails').appendChild(detailItem);
                    }
                });
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            document.getElementById('result').classList.add('active');
            document.getElementById('error').classList.remove('active');

            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
            document.getElementById('result').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error').classList.remove('active');
            document.getElementById('result').classList.remove('active');
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        function showError(message) {
            document.getElementById('error').textContent = message;
            document.getElementById('error').classList.add('active');
        }

        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success active';
            successDiv.textContent = message;

            const inputSection = document.querySelector('.input-section');
            const existingSuccess = inputSection.querySelector('.success');
            if (existingSuccess) {
                existingSuccess.remove();
            }

            inputSection.appendChild(successDiv);

            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initInterface);
    </script>
</body>
</html>